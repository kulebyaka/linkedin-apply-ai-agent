<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ cv.contact.full_name }} - Resume</title>
</head>
<body>
    <!-- Header Section -->
    <header>
        <h1>{{ cv.contact.full_name }}</h1>
        <div class="contact-info">
            <span class="email">{{ cv.contact.email }}</span>
            {% if cv.contact.phone %}<span class="separator">•</span><span class="phone">{{ cv.contact.phone }}</span>{% endif %}
            {% if cv.contact.location %}<span class="separator">•</span><span class="location">{{ cv.contact.location }}</span>{% endif %}
        </div>
        {% if cv.contact.linkedin_url or cv.contact.github_url or cv.contact.portfolio_url %}
        <div class="contact-links">
            {% if cv.contact.linkedin_url %}<a href="{{ cv.contact.linkedin_url }}">LinkedIn</a>{% endif %}
            {% if cv.contact.github_url %}{% if cv.contact.linkedin_url %}<span class="separator">•</span>{% endif %}<a href="{{ cv.contact.github_url }}">GitHub</a>{% endif %}
            {% if cv.contact.portfolio_url %}{% if cv.contact.linkedin_url or cv.contact.github_url %}<span class="separator">•</span>{% endif %}<a href="{{ cv.contact.portfolio_url }}">Portfolio</a>{% endif %}
        </div>
        {% endif %}
    </header>

    <!-- Professional Summary -->
    {% if cv.summary %}
    <section class="summary">
        <h2>Professional Summary</h2>
        <p>{{ cv.summary }}</p>
    </section>
    {% endif %}

    <!-- Work Experience -->
    {% if cv.experiences %}
    <section class="experience">
        <h2>Work Experience</h2>
        {% for exp in cv.experiences %}
        <div class="experience-entry">
            <div class="experience-header">
                <h3>{{ exp.position }}</h3>
                <span class="company">{{ exp.company }}</span>
            </div>
            <div class="experience-meta">
                <span class="date">{{ exp.start_date|format_date }} - {{ exp.end_date|format_date if exp.end_date else 'Present' }}</span>
                {% if exp.location %}<span class="separator">•</span><span class="location">{{ exp.location }}</span>{% endif %}
            </div>
            {% if exp.description %}
            <p class="description">{{ exp.description }}</p>
            {% endif %}
            {% if exp.achievements %}
            <ul class="achievements">
                {% for achievement in exp.achievements %}
                <li>{{ achievement }}</li>
                {% endfor %}
            </ul>
            {% endif %}
            {% if exp.technologies %}
            <div class="technologies">
                <strong>Technologies:</strong> {{ exp.technologies|join(', ') }}
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </section>
    {% endif %}

    <!-- Education -->
    {% if cv.education %}
    <section class="education">
        <h2>Education</h2>
        {% for edu in cv.education %}
        <div class="education-entry">
            <h3>{{ edu.degree }}{% if edu.field_of_study %} in {{ edu.field_of_study }}{% endif %}</h3>
            <div class="institution">{{ edu.institution }}</div>
            <div class="education-meta">
                <span class="date">{{ edu.start_date|format_date }} - {{ edu.end_date|format_date if edu.end_date else 'Present' }}</span>
                {% if edu.gpa %}<span class="separator">•</span><span class="gpa">GPA: {{ edu.gpa }}</span>{% endif %}
            </div>
            {% if edu.achievements %}
            <ul class="achievements">
                {% for achievement in edu.achievements %}
                <li>{{ achievement }}</li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>
        {% endfor %}
    </section>
    {% endif %}

    <!-- Skills -->
    {% if cv.skills %}
    <section class="skills">
        <h2>Skills</h2>
        {% set skills_by_category = cv.skills | groupby('category') %}
        {% for category, category_skills in skills_by_category %}
        <div class="skill-category">
            <h3>{{ category }}</h3>
            <div class="skill-list">
                {% for skill in category_skills %}
                <span class="skill-item">
                    {{ skill.name }}{% if skill.proficiency %} <span class="proficiency">({{ skill.proficiency }})</span>{% endif %}{% if not loop.last %},{% endif %}
                </span>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </section>
    {% endif %}

    <!-- Projects -->
    {% if cv.projects %}
    <section class="projects">
        <h2>Notable Projects</h2>
        {% for project in cv.projects %}
        <div class="project-entry">
            <h3>
                {{ project.name }}
                {% if project.url %}<a href="{{ project.url }}" class="project-link">↗</a>{% endif %}
            </h3>
            {% if project.description %}
            <p>{{ project.description }}</p>
            {% endif %}
            {% if project.achievements %}
            <ul class="achievements">
                {% for achievement in project.achievements %}
                <li>{{ achievement }}</li>
                {% endfor %}
            </ul>
            {% endif %}
            {% if project.technologies %}
            <div class="technologies">
                <strong>Technologies:</strong> {{ project.technologies|join(', ') }}
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </section>
    {% endif %}

    <!-- Certifications -->
    {% if cv.certifications %}
    <section class="certifications">
        <h2>Certifications</h2>
        <ul>
            {% for cert in cv.certifications %}
            <li>{{ cert }}</li>
            {% endfor %}
        </ul>
    </section>
    {% endif %}

    <!-- Languages -->
    {% if cv.languages %}
    <section class="languages">
        <h2>Languages</h2>
        <ul>
            {% for lang in cv.languages %}
            <li>{{ lang.language }} - {{ lang.level }}</li>
            {% endfor %}
        </ul>
    </section>
    {% endif %}
</body>
</html>
